# EcoBoard 功能測試報告

測試日期：2025-11-05
測試環境：Development (localhost)
測試人員：AI Assistant

---

## Phase 1: Core Infrastructure 測試

### ✅ 1.1 資料庫連線
- [ ] PostgreSQL 連線成功
- [ ] 所有資料表已建立
- [ ] 索引已正確建立

**測試方法：** 檢查伺服器啟動日誌

**結果：**
```
等待測試...
```

---

### ✅ 1.2 LDAP 認證
- [ ] LDAP 伺服器連線成功
- [ ] 多種 DN 格式自動嘗試
- [ ] 認證成功返回使用者資訊
- [ ] 認證失敗正確處理

**測試方法：** 
1. 使用正確的 LDAP 帳號密碼登入
2. 使用錯誤的密碼嘗試登入

**測試帳號：** (請填入實際測試帳號)
- 使用者名稱: 
- 密碼: 

**結果：**
```
等待測試...
```

---

### ✅ 1.3 JWT Token 機制
- [ ] 登入成功獲得 Token
- [ ] Token 包含正確的使用者資訊
- [ ] Token 驗證成功
- [ ] 過期 Token 被拒絕
- [ ] 無效 Token 被拒絕

**測試方法：** 檢查登入 API 回應和後續 API 請求

**結果：**
```
等待測試...
```

---

## Phase 2: 基本功能測試

### ✅ 2.1 使用者登入/登出
- [ ] 登入頁面正常顯示
- [ ] 輸入帳號密碼可登入
- [ ] 登入成功跳轉到團隊選擇頁
- [ ] 登入失敗顯示錯誤訊息
- [ ] 登出功能正常

**測試步驟：**
1. 開啟 http://localhost:3001
2. 輸入 LDAP 帳號密碼
3. 點擊登入
4. 檢查是否跳轉
5. 點擊登出

**結果：**
```
等待測試...
```

---

### ✅ 2.2 團隊建立與管理
- [ ] 可以建立新團隊
- [ ] 團隊名稱正確顯示
- [ ] 可以選擇團隊進入
- [ ] 團隊列表正確顯示
- [ ] 創建者自動成為團隊成員

**測試步驟：**
1. 登入後在團隊選擇頁
2. 點擊「建立新團隊」
3. 輸入團隊名稱（例如：測試團隊）
4. 點擊建立
5. 檢查團隊是否出現在列表中

**結果：**
```
等待測試...
```

---

### ✅ 2.3 團隊成員管理
- [ ] 可以查看團隊成員列表
- [ ] 可以新增團隊成員
- [ ] 可以移除團隊成員
- [ ] 成員角色正確顯示
- [ ] 權限控制正常

**測試步驟：**
1. 進入團隊後到團隊管理頁面
2. 查看成員列表
3. 嘗試新增成員（需要另一個 LDAP 帳號）
4. 嘗試移除成員

**結果：**
```
等待測試...
```

---

### ✅ 2.4 每日打卡功能
- [ ] 打卡頁面正常顯示
- [ ] 可以輸入今日計畫
- [ ] 打卡成功儲存
- [ ] 今日已打卡時顯示已打卡
- [ ] 不能重複打卡
- [ ] 打卡歷史可查詢

**測試步驟：**
1. 進入 Dashboard
2. 點擊「每日打卡」
3. 輸入今日工作計畫
4. 點擊提交
5. 重新整理頁面檢查狀態
6. 嘗試再次打卡

**結果：**
```
等待測試...
```

---

### ✅ 2.5 工作項目 CRUD
- [ ] 可以新增工作項目
- [ ] 可以查看工作項目列表
- [ ] 可以編輯工作項目
- [ ] 可以刪除工作項目
- [ ] 工作項目與打卡記錄關聯

**測試步驟：**
1. 在 Dashboard 點擊「輸入工作項目」
2. 透過 AI 對話新增工作項目
3. 檢查工作項目是否儲存
4. 嘗試編輯工作項目
5. 嘗試刪除工作項目

**結果：**
```
等待測試...
```

---

## Phase 3: AI 整合測試

### ✅ 3.1 vLLM API 串接
- [ ] vLLM 伺服器連線成功
- [ ] API 請求正常
- [ ] API 回應正確解析
- [ ] 錯誤處理正常

**測試方法：** 檢查伺服器日誌和 AI 功能回應

**vLLM 設定：**
- URL: http://ai-api.example.com:8001/v1
- Model: openai/gpt-oss-20b

**結果：**
```
等待測試...
```

---

### ✅ 3.2 AI 對話介面
- [ ] 對話框正常顯示
- [ ] 可以輸入訊息
- [ ] AI 有正確回應
- [ ] 對話歷史正確顯示
- [ ] 訊息格式正確（使用者/AI 區分）
- [ ] 自動捲動到最新訊息

**測試步驟：**
1. 進入「輸入工作項目」頁面
2. 在對話框輸入：「今天要開發登入功能」
3. 等待 AI 回應
4. 繼續對話：「還要修 bug」
5. 檢查對話記錄

**測試對話範例：**
```
User: 今天要開發登入功能
AI: (等待回應)

User: 還要修復資料庫連線的 bug
AI: (等待回應)
```

**結果：**
```
等待測試...
```

---

### ✅ 3.3 工作項目智能分析
- [ ] 可以分析團隊工作項目
- [ ] 返回工作摘要
- [ ] 列出關鍵任務
- [ ] 識別風險項目
- [ ] 提供優先級建議

**測試步驟：**
1. 確保團隊有多個工作項目
2. 使用 AI 分析功能（或透過 API 測試）
3. 檢查分析結果結構

**API 測試：**
```bash
POST /api/ai/analyze-workitems
{
  "teamId": 1,
  "date": "2025-11-05"
}
```

**預期結果結構：**
```json
{
  "summary": "...",
  "keyTasks": [...],
  "risks": [...],
  "priorities": [...]
}
```

**結果：**
```
等待測試...
```

---

### ✅ 3.4 任務自動分配
- [ ] 可以分配團隊任務
- [ ] 返回每個成員的任務
- [ ] 提供執行順序建議
- [ ] 給出分配建議

**測試步驟：**
1. 確保團隊有多個成員和工作項目
2. 使用任務分配功能
3. 檢查分配結果

**API 測試：**
```bash
POST /api/ai/distribute-tasks
{
  "teamId": 1,
  "date": "2025-11-05"
}
```

**預期結果結構：**
```json
{
  "distribution": [
    {
      "userId": 1,
      "username": "...",
      "tasks": [...]
    }
  ],
  "executionOrder": [...],
  "recommendations": [...]
}
```

**結果：**
```
等待測試...
```

---

### ✅ 3.5 每日總結生成
- [ ] 可以生成每日總結
- [ ] 比較早上計畫與晚上實際
- [ ] 提供改善建議
- [ ] 總結格式正確

**測試步驟：**
1. 確保當天有打卡記錄和工作更新
2. 使用每日總結功能
3. 檢查總結內容

**API 測試：**
```bash
POST /api/ai/daily-summary
{
  "teamId": 1,
  "date": "2025-11-05"
}
```

**結果：**
```
等待測試...
```

---

## API 端點測試清單

### Authentication (✅ Phase 1)
- [ ] POST `/api/auth/login` - 登入
- [ ] GET `/api/auth/verify` - 驗證 Token

### Teams (✅ Phase 2)
- [ ] POST `/api/teams` - 建立團隊
- [ ] GET `/api/teams` - 取得使用者團隊列表
- [ ] GET `/api/teams/:id` - 取得團隊詳情
- [ ] PUT `/api/teams/:id` - 更新團隊
- [ ] GET `/api/teams/:id/members` - 取得團隊成員
- [ ] POST `/api/teams/:id/members` - 新增成員
- [ ] DELETE `/api/teams/:teamId/members/:userId` - 移除成員

### Check-in (✅ Phase 2)
- [ ] POST `/api/checkin` - 每日打卡
- [ ] GET `/api/checkin/today/:teamId` - 今日團隊打卡
- [ ] GET `/api/checkin/history` - 個人打卡歷史

### Work Items (✅ Phase 2)
- [ ] POST `/api/workitems` - 新增工作項目
- [ ] GET `/api/workitems/today` - 今日個人工作
- [ ] GET `/api/workitems/team/:teamId/today` - 今日團隊工作
- [ ] PUT `/api/workitems/:id` - 更新工作項目
- [ ] POST `/api/workitems/:id/updates` - 新增工作更新
- [ ] GET `/api/workitems/:id/updates` - 取得工作更新

### AI (✅ Phase 3)
- [ ] POST `/api/ai/chat` - AI 對話
- [ ] POST `/api/ai/analyze-workitems` - 分析工作項目
- [ ] POST `/api/ai/distribute-tasks` - 分配任務
- [ ] POST `/api/ai/standup/review` - 完成站立會議
- [ ] GET `/api/ai/standup/team/:teamId/today` - 今日會議狀態
- [ ] POST `/api/ai/daily-summary` - 生成每日總結

---

## 測試環境檢查

### 系統需求
- [x] Node.js 18+ 已安裝
- [x] PostgreSQL 12+ 已安裝
- [x] npm 套件已安裝

### 服務狀態
- [ ] Backend Server (Port 3000) ✅ 運行中
- [ ] Frontend Server (Port 3001) ✅ 運行中
- [ ] PostgreSQL Database ✅ 連線成功
- [ ] LDAP Server ⏳ 等待測試
- [ ] vLLM API Server ⏳ 等待測試

### 環境變數設定
- [x] Database 設定完成
- [x] LDAP 設定完成
- [x] vLLM 設定完成
- [x] JWT Secret 已設定

---

## 已知問題

### 高優先級
- [ ] (待發現)

### 中優先級
- [ ] (待發現)

### 低優先級
- [ ] TypeScript 警告（未使用的變數）- 不影響功能

---

## 測試結論

### Phase 1: Core Infrastructure
**狀態：** ⏳ 測試中
**完成度：** 0/3

### Phase 2: 基本功能
**狀態：** ⏳ 測試中
**完成度：** 0/5

### Phase 3: AI 整合
**狀態：** ⏳ 測試中
**完成度：** 0/5

### 總體評估
**總完成度：** 0/13 (0%)
**關鍵問題：** 待測試
**可上線：** ⏳ 待評估

---

## 下一步行動

1. **立即執行：** 執行所有測試項目
2. **修復問題：** 處理測試中發現的 bug
3. **文件更新：** 更新測試結果到本文件
4. **準備 Phase 4：** 規劃 UI/UX 優化

---

## 測試執行記錄

### 測試 Session 1
- **時間：** 2025-11-05
- **執行者：** 待填入
- **結果：** 待填入
